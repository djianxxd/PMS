{{define "content"}}
<div class="grid grid-cols-1 md:grid-cols-2 gap-8">
    <!-- Add Todo -->
    <div class="bg-white p-6 rounded-xl shadow-sm h-fit">
        <h3 class="text-lg font-bold text-gray-800 mb-4">添加待办</h3>
        <form action="/todos/add" method="POST" class="space-y-4">
            <div>
                <label class="block text-sm font-medium text-gray-700">内容</label>
                <input type="text" name="content" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 p-2 border">
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700">截止日期</label>
                <input type="datetime-local" name="due_date" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 p-2 border">
            </div>
            <button type="submit" class="w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors">添加任务</button>
        </form>
    </div>

    <!-- Todo List -->
    <div class="space-y-4">
        <h3 class="text-lg font-bold text-gray-800">任务列表</h3>
        {{range .Todos}}
        <div class="bg-white p-4 rounded-xl shadow-sm flex items-center justify-between group {{if eq .Status "completed"}}opacity-60 bg-gray-50{{end}}">
            <div class="flex items-center space-x-3">
                <form action="/todos/toggle" method="POST">
                    <input type="hidden" name="id" value="{{.ID}}">
                    <button type="submit" class="w-6 h-6 rounded border-2 flex items-center justify-center {{if eq .Status "completed"}}bg-blue-500 border-blue-500 text-white{{else}}border-gray-300 text-transparent hover:border-blue-500{{end}}">
                        <i class="fas fa-check text-xs"></i>
                    </button>
                </form>
                <div>
                    <p class="font-medium {{if eq .Status "completed"}}line-through text-gray-500{{else}}text-gray-800{{end}}">{{.Content}}</p>
                    {{if not .DueDate.IsZero}}
                    <p class="text-xs {{if eq .Status "completed"}}text-gray-400{{else}}text-blue-500{{end}}">
                        <i class="far fa-clock mr-1"></i>{{.DueDate.Format "2006-01-02 15:04"}}
                    </p>
                    {{end}}
                </div>
            </div>
            <form action="/todos/delete" method="POST">
                <input type="hidden" name="id" value="{{.ID}}">
                <button type="submit" class="text-gray-400 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity">
                    <i class="fas fa-trash-alt"></i>
                </button>
            </form>
        </div>
        {{else}}
        <div class="text-center py-10 text-gray-500">
            <i class="fas fa-clipboard-check text-4xl mb-3 opacity-30"></i>
            <p>暂无任务，享受当下！</p>
        </div>
        {{end}}
    </div>
</div>
{{end}}
