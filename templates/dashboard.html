{{define "content"}}
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
    <!-- Stat Cards -->
    <div class="bg-white rounded-xl shadow-sm p-6 border-l-4 border-blue-500">
        <div class="flex items-center">
            <div class="p-3 rounded-full bg-blue-100 text-blue-500 mr-4">
                <i class="fas fa-wallet text-xl"></i>
            </div>
            <div>
                <p class="text-sm text-gray-500">本月支出</p>
                <p class="text-2xl font-bold text-gray-800">¥{{printf "%.2f" .MonthlyExpense}}</p>
            </div>
        </div>
    </div>
    <div class="bg-white rounded-xl shadow-sm p-6 border-l-4 border-green-500">
        <div class="flex items-center">
            <div class="p-3 rounded-full bg-green-100 text-green-500 mr-4">
                <i class="fas fa-coins text-xl"></i>
            </div>
            <div>
                <p class="text-sm text-gray-500">本月收入</p>
                <p class="text-2xl font-bold text-gray-800">¥{{printf "%.2f" .MonthlyIncome}}</p>
            </div>
        </div>
    </div>
    <div class="bg-white rounded-xl shadow-sm p-6 border-l-4 border-purple-500">
        <div class="flex items-center">
            <div class="p-3 rounded-full bg-purple-100 text-purple-500 mr-4">
                <i class="fas fa-fire text-xl"></i>
            </div>
            <div>
                <p class="text-sm text-gray-500">当前打卡连续</p>
                <p class="text-2xl font-bold text-gray-800">{{.MaxStreak}} 天</p>
            </div>
        </div>
    </div>
    <div class="bg-white rounded-xl shadow-sm p-6 border-l-4 border-yellow-500">
        <div class="flex items-center">
            <div class="p-3 rounded-full bg-yellow-100 text-yellow-500 mr-4">
                <i class="fas fa-clipboard-check text-xl"></i>
            </div>
            <div>
                <p class="text-sm text-gray-500">待办完成率</p>
                <p class="text-2xl font-bold text-gray-800">{{.TodoCompletionRate}}%</p>
            </div>
        </div>
    </div>
</div>

<div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
    <!-- Charts -->
    <div class="bg-white p-6 rounded-xl shadow-sm">
        <h3 class="text-lg font-bold text-gray-800 mb-4">收支概览 (近6个月)</h3>
        <canvas id="financeChart"></canvas>
    </div>
    <div class="bg-white p-6 rounded-xl shadow-sm">
        <h3 class="text-lg font-bold text-gray-800 mb-4">习惯坚持情况</h3>
        <canvas id="habitChart"></canvas>
    </div>
</div>

<script>
    const financeCtx = document.getElementById('financeChart').getContext('2d');
    new Chart(financeCtx, {
        type: 'bar',
        data: {
            labels: {{.ChartMonths}},
            datasets: [{
                label: '收入',
                data: {{.ChartIncome}},
                backgroundColor: '#10B981',
                borderRadius: 4
            }, {
                label: '支出',
                data: {{.ChartExpense}},
                backgroundColor: '#EF4444',
                borderRadius: 4
            }]
        },
        options: { responsive: true, scales: { y: { beginAtZero: true } } }
    });

    const habitCtx = document.getElementById('habitChart').getContext('2d');
    new Chart(habitCtx, {
        type: 'doughnut',
        data: {
            labels: ['已完成', '未完成'],
            datasets: [{
                data: [{{.HabitDoneCount}}, {{.HabitMissedCount}}],
                backgroundColor: ['#3B82F6', '#E5E7EB']
            }]
        }
    });
</script>
{{end}}
