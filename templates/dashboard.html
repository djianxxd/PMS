{{define "content"}}
<!-- 欢迎横幅 -->
<div class="mb-8 animate-fade-in">
    <div class="glass-panel rounded-2xl p-8 text-center relative overflow-hidden">
        <div class="absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full opacity-20 blur-xl floating-label"></div>
        <div class="absolute bottom-0 left-0 w-24 h-24 bg-gradient-to-br from-blue-400 to-cyan-400 rounded-full opacity-20 blur-xl floating-label" style="animation-delay: 1s;"></div>
        <h1 class="text-4xl font-bold gradient-text mb-2">欢迎回来！</h1>
        <p class="text-gray-600 text-lg">今天又是充满活力的一天，让我们一起记录生活的美好</p>
        <div class="mt-4 flex justify-center space-x-4">
            <span class="inline-flex items-center px-3 py-1 rounded-full text-sm bg-gradient-to-r from-green-400 to-blue-500 text-white">
                <i class="fas fa-fire mr-1"></i> 连续打卡 <span class="font-bold">{{.MaxStreak}}</span> 天
            </span>
            <span class="inline-flex items-center px-3 py-1 rounded-full text-sm bg-gradient-to-r from-blue-400 to-blue-600 text-white">
                <i class="fas fa-check-circle mr-1"></i> 完成率 <span class="font-bold">{{.TodoCompletionRate}}</span>%
            </span>
        </div>
    </div>
</div>

<!-- 统计卡片 -->
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
    <div class="stat-card rounded-2xl p-6 animate-slide-up" style="animation-delay: 0.1s;">
        <div class="flex items-center justify-between">
            <div>
                <p class="text-sm text-gray-600 mb-1">本月支出</p>
                <p class="text-3xl font-bold text-red-500">¥{{printf "%.2f" .MonthlyExpense}}</p>
                <p class="text-xs text-gray-500 mt-1">
                    <i class="fas fa-trending-down mr-1"></i>暂无数据
                </p>
            </div>
            <div class="p-4 rounded-2xl bg-gradient-to-br from-red-400 to-pink-500 text-white shadow-lg">
                <i class="fas fa-wallet text-2xl"></i>
            </div>
        </div>
    </div>

    <div class="stat-card rounded-2xl p-6 animate-slide-up" style="animation-delay: 0.2s;">
        <div class="flex items-center justify-between">
            <div>
                <p class="text-sm text-gray-600 mb-1">本月收入</p>
                <p class="text-3xl font-bold text-green-500">¥{{printf "%.2f" .MonthlyIncome}}</p>
                <p class="text-xs text-gray-500 mt-1">
                    <i class="fas fa-trending-up mr-1"></i>暂无数据
                </p>
            </div>
            <div class="p-4 rounded-2xl bg-gradient-to-br from-green-400 to-emerald-500 text-white shadow-lg">
                <i class="fas fa-coins text-2xl"></i>
            </div>
        </div>
    </div>

    <div class="stat-card rounded-2xl p-6 animate-slide-up" style="animation-delay: 0.3s;">
        <div class="flex items-center justify-between">
            <div>
                <p class="text-sm text-gray-600 mb-1">打卡连续</p>
                <p class="text-3xl font-bold text-blue-500">{{.MaxStreak}} <span class="text-lg">天</span></p>
                <p class="text-xs text-gray-500 mt-1">
                    <i class="fas fa-fire mr-1 text-orange-500"></i>保持良好
                </p>
            </div>
            <div class="p-4 rounded-2xl bg-gradient-to-br from-blue-400 to-blue-600 text-white shadow-lg">
                <i class="fas fa-fire text-2xl"></i>
            </div>
        </div>
    </div>

    <div class="stat-card rounded-2xl p-6 animate-slide-up" style="animation-delay: 0.4s;">
        <div class="flex items-center justify-between">
            <div>
                <p class="text-sm text-gray-600 mb-1">完成率</p>
                <p class="text-3xl font-bold text-blue-500">{{.TodoCompletionRate}}<span class="text-lg">%</span></p>
                <p class="text-xs text-gray-500 mt-1">
                    <i class="fas fa-check-circle mr-1"></i>效率提升中
                </p>
            </div>
            <div class="p-4 rounded-2xl bg-gradient-to-br from-blue-400 to-cyan-500 text-white shadow-lg">
                <i class="fas fa-clipboard-check text-2xl"></i>
            </div>
        </div>
    </div>
</div>

<!-- 图表区域 -->
<div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
    <!-- 收支图表 -->
    <div class="glass-panel rounded-2xl p-6 animate-fade-in" style="animation-delay: 0.5s;">
        <div class="flex items-center justify-between mb-6">
            <h3 class="text-xl font-bold gradient-text">收支概览</h3>
            <div class="flex items-center space-x-2">
                <div class="flex items-center text-sm">
                    <div class="w-3 h-3 bg-gradient-to-r from-green-400 to-emerald-500 rounded-full mr-2"></div>
                    <span class="text-gray-600">收入</span>
                </div>
                <div class="flex items-center text-sm">
                    <div class="w-3 h-3 bg-gradient-to-r from-red-400 to-pink-500 rounded-full mr-2"></div>
                    <span class="text-gray-600">支出</span>
                </div>
            </div>
        </div>
        <div class="relative h-64">
            <canvas id="financeChart"></canvas>
        </div>
    </div>

    <!-- 习惯图表 -->
    <div class="glass-panel rounded-2xl p-6 animate-fade-in" style="animation-delay: 0.6s;">
        <div class="flex items-center justify-between mb-6">
            <h3 class="text-xl font-bold gradient-text">习惯坚持</h3>
            <div class="text-sm text-gray-600">
                今日 <span class="font-bold text-green-500">{{.HabitDoneCount}}</span> / 
                <span class="font-bold text-gray-400">{{.TotalCount}}</span>
            </div>
        </div>
        <div class="relative h-64">
            <canvas id="habitChart"></canvas>
        </div>
    </div>
</div>

<!-- 快速操作区域 -->
<div class="grid grid-cols-1 md:grid-cols-3 gap-6 animate-slide-up" style="animation-delay: 0.7s;">
    <div class="glass-panel rounded-2xl p-6 hover:shadow-glow transition-all duration-300 cursor-pointer group">
        <div class="flex items-center justify-between mb-4">
            <h4 class="font-semibold text-gray-700">快速记账</h4>
            <div class="p-2 rounded-lg bg-gradient-to-br from-blue-400 to-cyan-500 text-white group-hover:scale-110 transition-transform">
                <i class="fas fa-plus"></i>
            </div>
        </div>
        <p class="text-sm text-gray-600">一键记录日常收支</p>
        <div class="mt-4 flex space-x-2">
            <button onclick="window.location.href='/finance?type=expense'" class="px-3 py-1 text-xs bg-red-100 text-red-600 rounded-lg hover:bg-red-200 transition-colors">支出</button>
            <button onclick="window.location.href='/finance?type=income'" class="px-3 py-1 text-xs bg-green-100 text-green-600 rounded-lg hover:bg-green-200 transition-colors">收入</button>
        </div>
    </div>

    <div class="glass-panel rounded-2xl p-6 hover:shadow-glow transition-all duration-300 cursor-pointer group">
        <div class="flex items-center justify-between mb-4">
            <h4 class="font-semibold text-gray-700">习惯打卡</h4>
            <div class="p-2 rounded-lg bg-gradient-to-br from-blue-400 to-blue-600 text-white group-hover:scale-110 transition-transform">
                <i class="fas fa-check"></i>
            </div>
        </div>
        <p class="text-sm text-gray-600">坚持今日习惯目标</p>
        <div class="mt-4 flex space-x-2">
            <button onclick="window.location.href='/habits'" class="px-3 py-1 text-xs bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200 transition-colors">打卡</button>
            <button onclick="window.location.href='/habits'" class="px-3 py-1 text-xs bg-gray-100 text-gray-600 rounded-lg hover:bg-gray-200 transition-colors">查看</button>
        </div>
    </div>

    <div class="glass-panel rounded-2xl p-6 hover:shadow-glow transition-all duration-300 cursor-pointer group">
        <div class="flex items-center justify-between mb-4">
            <h4 class="font-semibold text-gray-700">待办事项</h4>
            <div class="p-2 rounded-lg bg-gradient-to-br from-orange-400 to-yellow-500 text-white group-hover:scale-110 transition-transform">
                <i class="fas fa-tasks"></i>
            </div>
        </div>
        <p class="text-sm text-gray-600">管理今日任务清单</p>
        <div class="mt-4 flex space-x-2">
            <button onclick="window.location.href='/todos'" class="px-3 py-1 text-xs bg-orange-100 text-orange-600 rounded-lg hover:bg-orange-200 transition-colors">添加</button>
            <button onclick="window.location.href='/todos'" class="px-3 py-1 text-xs bg-gray-100 text-gray-600 rounded-lg hover:bg-gray-200 transition-colors">查看</button>
        </div>
    </div>
</div>

<!-- 激励语句 -->
<div class="mt-8 text-center animate-fade-in" style="animation-delay: 0.8s;">
    <div class="glass-panel rounded-2xl p-6 inline-block">
        <p class="text-lg text-gray-700 font-medium italic">
            <i class="fas fa-quote-left text-blue-400 mr-2"></i>
            <span id="motivationalQuote">坚持不是努力，而是习惯。</span>
            <i class="fas fa-quote-right text-blue-400 ml-2"></i>
        </p>
        <p class="text-sm text-gray-500 mt-2">- 每日一句</p>
    </div>
</div>

<script>
    // 增强图表样式
    const financeCtx = document.getElementById('financeChart');
    if (financeCtx) {
        new Chart(financeCtx, {
            type: 'bar',
            data: {
                labels: {{.ChartMonths}},
                datasets: [{
                    label: '收入',
                    data: {{.ChartIncome}},
                    backgroundColor: 'rgba(34, 197, 94, 0.8)',
                    borderColor: 'rgba(34, 197, 94, 1)',
                    borderWidth: 2,
                    borderRadius: 8,
                }, {
                    label: '支出',
                    data: {{.ChartExpense}},
                    backgroundColor: 'rgba(239, 68, 68, 0.8)',
                    borderColor: 'rgba(239, 68, 68, 1)',
                    borderWidth: 2,
                    borderRadius: 8,
                }]
            },
            options: { 
                responsive: true, 
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: true,
                        position: 'top',
                        labels: {
                            font: {
                                size: 14,
                                weight: 'bold'
                            },
                            usePointStyle: true,
                            pointStyle: 'circle'
                        }
                    },
                    tooltip: {
                        backgroundColor: 'rgba(0, 0, 0, 0.8)',
                        padding: 12,
                        borderRadius: 8,
                        callbacks: {
                            label: function(context) {
                                let label = context.dataset.label || '';
                                if (label) {
                                    label += ': ';
                                }
                                label += '¥' + context.parsed.y.toFixed(2);
                                return label;
                            }
                        }
                    }
                },
                scales: { 
                    y: { 
                        beginAtZero: true,
                        grid: {
                            color: 'rgba(107, 114, 128, 0.1)',
                            drawBorder: false
                        },
                        ticks: {
                            callback: function(value) {
                                return '¥' + value;
                            },
                            font: {
                                size: 12
                            },
                            color: '#6b7280'
                        }
                    },
                    x: {
                        grid: {
                            display: false
                        },
                        ticks: {
                            font: {
                                size: 12
                            },
                            color: '#6b7280'
                        }
                    }
                }
            }
        });
    }

    const habitCtx = document.getElementById('habitChart');
    if (habitCtx) {
        new Chart(habitCtx, {
            type: 'doughnut',
            data: {
                labels: ['已完成', '未完成'],
                datasets: [{
                    data: [{{.HabitDoneCount}}, {{.HabitMissedCount}}],
                    backgroundColor: [
                        'rgba(34, 197, 94, 0.8)',
                        'rgba(229, 231, 235, 0.8)'
                    ],
                    borderColor: [
                        'rgba(34, 197, 94, 1)',
                        'rgba(229, 231, 235, 1)'
                    ],
                    borderWidth: 2,
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                cutout: '70%',
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            padding: 20,
                            font: {
                                size: 14
                            },
                            usePointStyle: true,
                            pointStyle: 'circle'
                        }
                    },
                    tooltip: {
                        backgroundColor: 'rgba(0, 0, 0, 0.8)',
                        padding: 12,
                        borderRadius: 8
                    }
                }
            }
        });
    }

    // 激励语句轮播
    const quotes = [
        "坚持不是努力，而是习惯。",
        "每一个小进步，都值得被庆祝。",
        "今天的努力，是明天的实力。",
        "自律给我自由。",
        "最好的时间就是现在。",
        "相信积累的力量。",
        "保持热爱，奔赴山海。"
    ];

    let quoteIndex = 0;
    setInterval(() => {
        const quoteElement = document.getElementById('motivationalQuote');
        if (quoteElement) {
            quoteElement.style.opacity = '0';
            setTimeout(() => {
                quoteIndex = (quoteIndex + 1) % quotes.length;
                quoteElement.textContent = quotes[quoteIndex];
                quoteElement.style.opacity = '1';
            }, 300);
        }
    }, 8000);
</script>
{{end}}