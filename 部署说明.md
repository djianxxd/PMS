# è‡ªå¾‹äººç”Ÿ - Linux éƒ¨ç½²åŒ…ç»“æ„

## ğŸ“¦ å®Œæ•´éƒ¨ç½²åŒ…æ–‡ä»¶

```
life-management-linux/
â”œâ”€â”€ è‡ªå¾‹äººç”Ÿ-linux          # Linuxå¯æ‰§è¡Œæ–‡ä»¶ (18.2MB)
â”œâ”€â”€ å¯åŠ¨.sh                 # å¢å¼ºå¯åŠ¨è„šæœ¬ (å½©è‰²ç•Œé¢ï¼Œå®Œæ•´æ£€æŸ¥)
â”œâ”€â”€ ç®€å•å¯åŠ¨.sh              # ç®€å•å¯åŠ¨è„šæœ¬ (åŸºç¡€åŠŸèƒ½)
â”œâ”€â”€ life-management.service # systemdæœåŠ¡æ–‡ä»¶
â”œâ”€â”€ README.md               # é¡¹ç›®è¯´æ˜æ–‡æ¡£
â”œâ”€â”€ Linuxä½¿ç”¨è¯´æ˜.md         # Linuxè¯¦ç»†ä½¿ç”¨æŒ‡å—
â”œâ”€â”€ ä½¿ç”¨è¯´æ˜.md             # Windowsä½¿ç”¨è¯´æ˜
â”œâ”€â”€ å¯åŠ¨.bat                # Windowså¯åŠ¨è„šæœ¬
â”œâ”€â”€ å®‰å…¨å¯åŠ¨.bat             # Windowså®‰å…¨å¯åŠ¨è„šæœ¬
â”œâ”€â”€ è‡ªå¾‹äººç”Ÿ.exe             # Windowså¯æ‰§è¡Œæ–‡ä»¶ (18.2MB)
â”œâ”€â”€ data/                   # æ•°æ®ç›®å½• (è¿è¡Œæ—¶åˆ›å»º)
â”‚   â””â”€â”€ app.db             # SQLiteæ•°æ®åº“ (é¦–æ¬¡è¿è¡Œåˆ›å»º)
â””â”€â”€ deploy/                 # éƒ¨ç½²ç›¸å…³æ–‡ä»¶
    â”œâ”€â”€ install.sh          # è‡ªåŠ¨å®‰è£…è„šæœ¬
    â”œâ”€â”€ uninstall.sh        # å¸è½½è„šæœ¬
    â””â”€â”€ config/            # é…ç½®æ–‡ä»¶ç›®å½•
        â””â”€â”€ nginx.conf      # Nginxé…ç½®ç¤ºä¾‹
```

## ğŸš€ ä¸€é”®éƒ¨ç½²è„šæœ¬

### è‡ªåŠ¨å®‰è£…è„šæœ¬ (install.sh)
```bash
#!/bin/bash
# è‡ªåŠ¨å®‰è£…è‡ªå¾‹äººç”Ÿåˆ°ç³»ç»Ÿ

INSTALL_DIR="/opt/life-management"
SERVICE_NAME="life-management"
USER_NAME="life-user"

echo "è‡ªå¾‹äººç”Ÿ - è‡ªåŠ¨å®‰è£…è„šæœ¬"
echo "========================"

# æ£€æŸ¥æƒé™
if [ "$EUID" -ne 0 ]; then
    echo "è¯·ä½¿ç”¨sudoè¿è¡Œæ­¤è„šæœ¬"
    exit 1
fi

# åˆ›å»ºç³»ç»Ÿç”¨æˆ·
if ! id "$USER_NAME" &>/dev/null; then
    echo "åˆ›å»ºç³»ç»Ÿç”¨æˆ·: $USER_NAME"
    useradd -r -s /bin/false "$USER_NAME"
fi

# åˆ›å»ºå®‰è£…ç›®å½•
echo "å®‰è£…åˆ°ç›®å½•: $INSTALL_DIR"
mkdir -p "$INSTALL_DIR"

# å¤åˆ¶æ–‡ä»¶
echo "å¤åˆ¶ç¨‹åºæ–‡ä»¶..."
cp è‡ªå¾‹äººç”Ÿ-linux "$INSTALL_DIR/"
cp -r templates "$INSTALL_DIR/" 2>/dev/null || true

# è®¾ç½®æƒé™
echo "è®¾ç½®æƒé™..."
chown -R "$USER_NAME:$USER_NAME" "$INSTALL_DIR"
chmod +x "$INSTALL_DIR/è‡ªå¾‹äººç”Ÿ-linux"

# å®‰è£…systemdæœåŠ¡
echo "å®‰è£…ç³»ç»ŸæœåŠ¡..."
cp life-management.service /etc/systemd/system/
sed -i "s|/opt/life-management|$INSTALL_DIR|g" /etc/systemd/system/life-management.service

# å¯ç”¨å¹¶å¯åŠ¨æœåŠ¡
systemctl daemon-reload
systemctl enable "$SERVICE_NAME"
systemctl start "$SERVICE_NAME"

# æ˜¾ç¤ºçŠ¶æ€
echo ""
echo "å®‰è£…å®Œæˆï¼"
echo "æœåŠ¡çŠ¶æ€:"
systemctl status "$SERVICE_NAME" --no-pager

echo ""
echo "è®¿é—®åœ°å€: http://localhost:8080"
echo "ç®¡ç†å‘½ä»¤:"
echo "  å¯åŠ¨: sudo systemctl start $SERVICE_NAME"
echo "  åœæ­¢: sudo systemctl stop $SERVICE_NAME"
echo "  é‡å¯: sudo systemctl restart $SERVICE_NAME"
echo "  çŠ¶æ€: sudo systemctl status $SERVICE_NAME"
```

### å¸è½½è„šæœ¬ (uninstall.sh)
```bash
#!/bin/bash
# å¸è½½è‡ªå¾‹äººç”Ÿ

INSTALL_DIR="/opt/life-management"
SERVICE_NAME="life-management"
USER_NAME="life-user"

echo "è‡ªå¾‹äººç”Ÿ - å¸è½½è„šæœ¬"
echo "===================="

# æ£€æŸ¥æƒé™
if [ "$EUID" -ne 0 ]; then
    echo "è¯·ä½¿ç”¨sudoè¿è¡Œæ­¤è„šæœ¬"
    exit 1
fi

# åœæ­¢å¹¶åˆ é™¤æœåŠ¡
echo "åœæ­¢å¹¶åˆ é™¤ç³»ç»ŸæœåŠ¡..."
systemctl stop "$SERVICE_NAME" 2>/dev/null || true
systemctl disable "$SERVICE_NAME" 2>/dev/null || true
rm -f /etc/systemd/system/life-management.service
systemctl daemon-reload

# å¤‡ä»½æ•°æ®
if [ -d "$INSTALL_DIR/data" ]; then
    echo "å¤‡ä»½æ•°æ®åˆ° /tmp/life-management-backup..."
    cp -r "$INSTALL_DIR/data" "/tmp/life-management-backup-$(date +%Y%m%d)"
fi

# åˆ é™¤ç¨‹åºæ–‡ä»¶
echo "åˆ é™¤ç¨‹åºæ–‡ä»¶..."
rm -rf "$INSTALL_DIR"

# åˆ é™¤ç³»ç»Ÿç”¨æˆ·
echo "åˆ é™¤ç³»ç»Ÿç”¨æˆ·..."
userdel "$USER_NAME" 2>/dev/null || true

echo "å¸è½½å®Œæˆï¼"
echo "å¦‚æœ‰æ•°æ®å¤‡ä»½ï¼Œè¯·æŸ¥çœ‹: /tmp/life-management-backup-*"
```

## ğŸŒ ç½‘ç»œé…ç½®ç¤ºä¾‹

### Nginxåå‘ä»£ç† (config/nginx.conf)
```nginx
server {
    listen 80;
    server_name your-domain.com;
    
    # å®‰å…¨å¤´
    add_header X-Frame-Options DENY;
    add_header X-Content-Type-Options nosniff;
    add_header X-XSS-Protection "1; mode=block";
    
    location / {
        proxy_pass http://localhost:8080;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        
        # WebSocketæ”¯æŒ
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
    }
}
```

## ğŸ“‹ éƒ¨ç½²æ£€æŸ¥æ¸…å•

### éƒ¨ç½²å‰æ£€æŸ¥
- [ ] ç›®æ ‡ç³»ç»Ÿæ¶æ„ä¸ºx86_64
- [ ] æœ‰è¶³å¤Ÿçš„ç£ç›˜ç©ºé—´ (è‡³å°‘100MB)
- [ ] ç«¯å£8080æœªè¢«å ç”¨
- [ ] æœ‰ç®¡ç†å‘˜æƒé™ (å¦‚éœ€å®‰è£…ä¸ºç³»ç»ŸæœåŠ¡)

### éƒ¨ç½²æ­¥éª¤
- [ ] ä¸‹è½½éƒ¨ç½²åŒ…
- [ ] è§£å‹åˆ°ç›®æ ‡ç›®å½•
- [ ] è¿è¡Œå®‰è£…è„šæœ¬æˆ–æ‰‹åŠ¨éƒ¨ç½²
- [ ] éªŒè¯ç¨‹åºå¯åŠ¨
- [ ] é…ç½®é˜²ç«å¢™è§„åˆ™
- [ ] è®¾ç½®åå‘ä»£ç† (å¯é€‰)
- [ ] é…ç½®SSLè¯ä¹¦ (å¯é€‰)

### éƒ¨ç½²åéªŒè¯
- [ ] è®¿é—® http://localhost:8080 æ˜¾ç¤ºæ­£å¸¸
- [ ] æ•°æ®åº“æ–‡ä»¶è‡ªåŠ¨åˆ›å»º
- [ ] å„åŠŸèƒ½æ¨¡å—æ­£å¸¸å·¥ä½œ
- [ ] æ—¥å¿—è®°å½•æ­£å¸¸
- [ ] æœåŠ¡è‡ªå¯åŠ¨æ­£å¸¸

---

**éƒ¨ç½²å®Œæˆåï¼Œæ‚¨å°±æ‹¥æœ‰äº†ä¸€ä¸ªå®Œæ•´çš„Linuxç‰ˆè‡ªå¾‹ç”Ÿæ´»ç®¡ç†ç³»ç»Ÿï¼** ğŸ‰